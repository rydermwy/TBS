<!DOCTYPE html>
<html>
<!--2020DEC-->
<body>
	<label for="arr">input:</label>
	<input type="text" id="text" name="text"></input>
	<br>
	<button onclick="separateString()">submit</button>
	<br>
	<span class="output"></span> 
	<p>score: 
		<span class="score"></span> 
	</p> 
</body>

<script type="text/javascript">
//The sequence of numbers will always be valid but may be incomplete
 function separateString() {  
	input = document.getElementById("text").value;
	//convert to num
    input_ = input.split(',').map(Number); 
	tencount=input_.reduce(function(a, e, i) {//get 10's index
		if (e == 10)
			a.push(i+1);
		return a;
	}, []).reverse();
	//console.log(tencount);
	tencount.forEach(function(v,i){input_.splice(v,0,0);});//insert 0
    //console.log(input_); 
    //document.querySelector('.output').textContent = input_; 
	calscore(input_);
        } 
function calscore(input_){
	i=0;
	c=input_.length>20?20:input_.length;//to ignore the extra 2 rounds
	//console.log(c);
	temp=0;
	score=0;
	for(i=0;i<c;i+=2){
		t1=i+1>=input_.length?0:input_[i+1];
		t2=i+2>=input_.length?0:input_[i+2];
		t3=i+3>=input_.length?0:input_[i+3];
		t4=i+4>=input_.length?0:input_[i+4];
		
		if(input_[i]==10){	//strike
			temp=10+t2+(t2<10?t3:t4);
			score+=temp;
		}else 
		if(t1!=0&&input_[i]+t1==10){	//spare
			temp=10+t2
			score+=temp;
			
		}else{
			temp=input_[i]+t1;
			score+=temp;
			
		}
		//console.log(t1,t2,t3,t4,score);
	}
	document.querySelector('.score').textContent = score;
}
</script>
</html>
